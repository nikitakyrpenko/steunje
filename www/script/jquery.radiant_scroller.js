/*!
 * jQuery RadiantScroller
 * Version: 0.1.0 (29/07/2014)
 * Copyright (c) 2014 Ilya Bodrov (http://www.radiant-wind.com/plugins/radiant_scroller)
 *
 * Requires: jQuery 1.7.0+
 */
(function(e){e.radiantScroller=function(t,n){var r=e(t);r.vars=e.extend({},e.radiantScroller.defaults,n);r.data("radiantscroller",r);r.animating=false;var i=r.find(".scroller-el"),s=i.size(),o=r.vars.elementWidth+r.vars.elementMargin,u=Math.ceil(s/r.vars.rows);r.width(o*u-r.vars.elementMargin);var a=i;do e(a.slice(0,u)).wrapAll('<div class="radiant_scroller_row" />');while((a=a.slice(u)).length>0);r.wrap('<div class="radiant_scroller"></div>').wrap('<div class="radiant_scroller_wrapper" />');var f=r.parent(".radiant_scroller_wrapper"),l=f.parent(".radiant_scroller"),c=r.vars.cols*o-r.vars.elementMargin+"px";f.css("max-width",c);l.css("max-width",c);var h=e('<div class="radiant-navigation" />').insertAfter(f),p=h.append(e('<div class="radiant-prev">'+r.vars.prevButtonText+"</div>")),d=h.append(e('<div class="radiant-next">'+r.vars.nextButtonText+"</div>"));r.calculateVisibleElements=function(){r.visible_els=(f.width()+r.vars.elementMargin)/o};r.moveElements=function(e,t){if(!r.animating){if(typeof e==="undefined")e=1;var n=r.vars.animateDuration;if(typeof t!=="undefined"&&t)n=0;var i=r.current_page+e;if(i>=0&&i<r.total_pages&&i!==r.current_page){r.animating=true;if(n!==0)r.vars.beforeMove(r);f.animate({scrollLeft:f.scrollLeft()+r.visible_els*o*e},n,r.vars.easingType,function(){r.animating=false});r.current_page=i;if(r.vars.addPagination)r.assignActivePage(true);if(n!==0){r.vars.afterMove(r);if(i+1===r.total_pages)r.vars.lastPageReached(r)}}}};r.initializePagination=function(){if(typeof r.old_visible_els==="undefined"||r.old_visible_els!==r.visible_els){r.old_visible_els=r.visible_els;r.total_pages=Math.ceil(u/r.visible_els);if(typeof r.current_page==="undefined"){r.current_page=0}else{r.current_page=Math.ceil(f.scrollLeft()/(r.visible_els*o))}if(r.vars.addPagination)r.drawPagination()}};r.drawPagination=function(){if(l.find(".radiant-pagination").size()>0)l.find(".radiant-pagination").remove();var t=e('<div class="radiant-pagination" />').insertAfter(f);for(var n=0;n<r.total_pages;n++){t.append('<div class="radiant-page" data-page="'+n+'" />')}r.assignActivePage()};r.assignActivePage=function(t){if(t===true)l.find(".current-page").removeClass("current-page");e(l.find(".radiant-page").get(r.current_page)).addClass("current-page")};r.addCaptions=function(){var t,n;i.each(function(){t=e(this).find("img");n=e.trim(t.attr("title"));if(typeof n!=="undefined"&&n!==""){t.attr("title","");e(this).append('<div class="radiant-caption">'+n+"</div>")}});var s={duration:r.vars.captionsAnimateDuration,easing:r.vars.captionsAnimateEasingType};r.on("mouseenter",".scroller-el",function(){var t=e(this).find(".radiant-caption");if(t.size()>0&&!t.is(":visible")){t.slideDown(s,r.vars.afterShowingCaption(t))}});r.on("mouseleave",".scroller-el",function(){var t=e(this).find(".radiant-caption");if(t.size()>0&&t.is(":visible")){t.slideUp(s,r.vars.afterHidingCaption(t))}})};e(window).bindWithDelay("resize",function(){r.calculateVisibleElements();r.initializePagination();var e=r.current_page;r.moveElements(-e,true);r.moveElements(e,true)},r.vars.delayDuration,true);h.on("click",".radiant-next",function(){r.moveElements(1)});h.on("click",".radiant-prev",function(){r.moveElements(-1)});if(r.vars.useMouseWheel){f.on("mousewheel",function(e){e.preventDefault();r.moveElements(e.deltaY)})}l.on("click",".radiant-page",function(){var t=e(this).data("page");if(r.current_page!==t){r.moveElements(t-r.current_page)}});r.calculateVisibleElements();r.initializePagination();if(r.vars.useCaptions){r.addCaptions()}r.vars.loaded(r)};e.radiantScroller.defaults={addPagination:false,animateDuration:700,captionsAnimateDuration:400,captionsAnimateEasingType:"swing",cols:2,delayDuration:500,easingType:"swing",elementMargin:10,elementWidth:200,nextButtonText:"",prevButtonText:"",rows:2,useCaptions:false,useMouseWheel:false,loaded:function(){},beforeMove:function(){},afterMove:function(){},lastPageReached:function(){},afterHidingCaption:function(){},afterShowingCaption:function(){}};e.fn.radiantScroller=function(t,n){if(t===undefined)t={};if(typeof t==="object"){new e.radiantScroller(this,t)}else{var r=e(this).data("radiantscroller");switch(t){case"next":r.moveElements(1);break;case"prev":r.moveElements(-1);break;case"by":if(typeof n==="number")r.moveElements(n);break;default:if(typeof t==="number")r.moveElements(t-1-r.current_page)}}return this}})(jQuery);(function(e){e.fn.bindWithDelay=function(t,n,r,i,s){if(e.isFunction(n)){s=i;i=r;r=n;n=undefined}r.guid=r.guid||e.guid&&e.guid++;return this.each(function(){function u(){var t=e.extend(true,{},arguments[0]);var n=this;var u=function(){o=null;r.apply(n,[t])};if(!s){clearTimeout(o);o=null}if(!o){o=setTimeout(u,i)}}var o=null;u.guid=r.guid;e(this).bind(t,n,u)})}})(jQuery)